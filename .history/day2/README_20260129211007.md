# Next.js Day 2 — Dynamic Routes + Params + Client/Server Components (Detailed Notes)

This README covers everything learned in **Day 2 of Next.js App Router**:
- Dynamic routing using `[id]`
- Route params (`params`)
- Why `params` is async in new Next.js versions
- Client vs Server Components
- Why `"use client"` is needed
- How navigation using `<Link />` works
- Overall working flow of our mini blog project

---

## ✅ 1) What we built in Day 2?

We created a mini blog system with these routes:

### 1) Home Page
- Route: `/`
- Has a button to navigate to blogs page

### 2) Blogs Listing Page
- Route: `/blogs`
- Displays a list of blogs
- Each blog is clickable

### 3) Blog Details Page (Dynamic Route)
- Route: `/blogs/1`, `/blogs/2`, `/blogs/3`, etc.
- Based on blog id from URL, it shows the respective blog details

### 4) Like Button
- Works only on blog details page
- Uses React state (`useState`) so it’s interactive

---

## ✅ 2) Next.js Routing: The Folder Structure Rule

In Next.js (App Router), routes are created automatically from the folder structure.

Meaning:
- You do NOT define routes manually like React Router.
- Next.js reads the `app/` directory and builds routes.

---

## ✅ 3) Static Routing vs Dynamic Routing

### Static Routes
Static routes are fixed routes.
Example:
- `/blogs`
- `/about`
- `/contact`

In folder structure:
- `app/blogs/page.js` becomes `/blogs`

---

### Dynamic Routes
Dynamic routes are used when URL changes depending on data.
Example:
- `/blogs/1`
- `/blogs/2`
- `/blogs/100`
- `/product/iphone15`
- `/user/aman`

So you cannot create folders like `blogs/1`, `blogs/2`, etc.

Instead, Next.js provides **dynamic segments** using bracket syntax:

- Folder name like `[id]` means “this part can be anything”

Example:
- `app/blogs/[id]/page.js` matches `/blogs/*`

---

## ✅ 4) How `[id]` Works

The folder `[id]` acts as a placeholder.

It matches:
- `/blogs/1`
- `/blogs/2`
- `/blogs/aman`
- `/blogs/xyz`

Next.js extracts the dynamic value and provides it as `params`.

---

## ✅ 5) What is `params`?

When we open a dynamic route like `/blogs/2`, Next.js gives this value inside `params`:

- `params.id = "2"`

So `params` contains all dynamic route values.

Example:
- route: `/blogs/[id]`
- URL: `/blogs/2`
- params: `{ id: "2" }`

---

## ✅ 6) Why the Error: “params is a Promise”?

In newer versions of Next.js (especially Next.js 15+), some dynamic APIs like:
- `params`
- `searchParams`

are asynchronous.

That means:
- `params` is not directly an object
- it is a Promise (async value)

So accessing `params.id` directly throws an error:
> params is a Promise and must be unwrapped with `await`

### Fix Conceptually
You must:
- make the page function async
- unwrap params before accessing its properties

---

## ✅ 7) Blog Details Logic Working

In the blog details page:
1. We extract the blog ID from the URL using `params`.
2. We find the matching blog object from the list.
3. If blog is found, show:
   - Title
   - Description
   - Author
4. If not found, show:
   - Blog Not Found page

This makes our project behave like a real-world blog app.

---

## ✅ 8) Client vs Server Components (MOST IMPORTANT)

### By Default: Server Component
In Next.js App Router:
- Every `page.js` is a **Server Component by default**

Server Components mean:
- Rendered on server
- Better SEO
- Faster initial load
- Secure (good for DB operations)
- Cannot use React hooks like:
  - useState
  - useEffect

---

### Client Component
Client Components run in the browser.
They are required when you want:
- interactive UI
- button click handlers
- state management
- hooks like `useState`, `useEffect`

To make a component client-side, we write:
- `"use client"`

---

## ✅ 9) Why LikeButton Must be a Client Component?

The Like button needs:
- click handling
- state (likes count)

State requires `useState`, which only works in the browser.

So LikeButton must be a Client Component.

Hence:
- LikeButton file includes `"use client"`

---

## ✅ 10) Server + Client Together (How Next.js Combines Them)

In blog details route:
- Blog details page is Server Component
- LikeButton is Client Component

Next.js does this:
1. Renders blog page on server (HTML)
2. Sends HTML to browser
3. Then loads LikeButton JavaScript in browser
4. LikeButton becomes interactive (hydration)

This hybrid rendering is one of the biggest features of Next.js.

---

## ✅ 11) Why Next.js `<Link />` is Better?

In Next.js, navigation should be done using `<Link />` instead of `<a>`.

Reason:
- `<a>` reloads the full page
- `<Link />` performs fast client-side navigation

Extra benefit:
- Prefetching (Next.js loads next pages in background)

This improves performance greatly.

---

## ✅ 12) Final Flow of Our Project

### Blogs Page Flow
1. User opens `/blogs`
2. Next.js renders blogs list page
3. Each blog is a clickable link to `/blogs/{id}`

---

### Blog Detail Page Flow
1. User opens `/blogs/2`
2. Next.js matches `/blogs/[id]`
3. Extracts id = `2`
4. Finds matching blog data
5. Renders HTML on server
6. LikeButton hydrates on client
7. User can click LikeButton (likes increase)

---

## ✅ Day 2 Learning Summary

You learned:
✅ Next.js routing based on folder structure  
✅ Dynamic routes using `[id]`  
✅ Route parameters using `params`  
✅ Async `params` issue in new Next.js versions  
✅ Server Components (default)  
✅ Client Components with `"use client"`  
✅ How interactivity works (hydration)  
✅ Fast routing using Next.js `<Link />`

---

## ✅ Day 3 Preview (Next Level)

In Day 3, we will learn:
- Nested dynamic routes
- `loading.js` for loading UI
- `error.js` for error boundaries
- `not-found.js` custom 404
- layouts per route level
- basic SEO using metadata

---
